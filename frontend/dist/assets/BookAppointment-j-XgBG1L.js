import{e as z,u as $,f as J,g as m,h as N,r as G,c as o,o as r,a as e,i as v,n as u,v as T,F as x,j as f,t as n,k as A,l as I,b as K,w as Q,d as C,m as W}from"./index-0FmNQmS6.js";import{a as h}from"./api-AP74rUlr.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"min-h-screen bg-secondary py-8 px-4"},ee={class:"max-w-5xl mx-auto"},te={class:"mb-12"},se={class:"flex items-center justify-between max-w-2xl mx-auto"},ae={class:"flex flex-col items-center flex-1"},le={class:"flex flex-col items-center flex-1"},oe={class:"flex flex-col items-center flex-1"},re={class:"card animate-fade-in"},ie={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},ne=["onClick"],de={class:"text-4xl mb-3"},ue={class:"font-bold text-gray-800 mb-1"},ce={class:"text-sm text-gray-500"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},me=["value"],ve=["value"],ge={class:"mb-8"},ye={class:"flex justify-end gap-4"},be={class:"card animate-fade-in"},xe={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},fe={class:"bg-white rounded-xl border border-gray-200 p-4"},Ce={class:"flex items-center justify-between mb-4"},we={class:"font-bold text-lg capitalize"},he={class:"grid grid-cols-7 gap-2 text-center"},ke=["onClick"],_e={key:0,class:"text-center text-gray-400 py-12"},De={key:1,class:"grid grid-cols-2 gap-3 max-h-96 overflow-y-auto"},Te=["onClick","disabled"],Ie={class:"card animate-fade-in"},Se={class:"bg-gray-50 rounded-xl p-6 mb-8"},Ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Me={class:"flex gap-3"},Ne={class:"font-bold"},Ae={class:"flex gap-3"},je={class:"font-bold"},Oe={class:"flex gap-3"},Re={class:"font-bold"},Ve={class:"flex gap-3"},Fe={class:"font-bold"},Le={key:0,class:"mt-6 flex gap-3"},qe={class:"text-gray-700"},He={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},Ye={class:"relative"},Be={class:"relative"},Pe={class:"flex justify-between"},Ue=["disabled"],ze={key:0},$e={key:1},Je=z({__name:"BookAppointment",setup(Ge){const c=$(),j=J(),i=m(1),g=m(!1),a=m({serviceType:"",specialty:"",doctorId:null,notes:"",date:"",time:"",phoneNumber:"",emergencyContact:"",patientId:1}),S=m([]),k=m([]),_=m([]),E=[{id:"CONSULTATION",label:"Consulta Nueva",description:"Primera visita con un especialista.",icon:"üè•"},{id:"LABORATORY",label:"Examen de Laboratorio",description:"An√°lisis cl√≠nicos requeridos.",icon:"üß™"},{id:"CHEMOTHERAPY",label:"Sesi√≥n de Tratamiento",description:"Ciclo de quimio o radioterapia.",icon:"üíâ"},{id:"RECOVERY",label:"Consulta de Seguimiento",description:"Revisi√≥n de progreso y resultados.",icon:"üîÑ"}],O=async()=>{try{const l=await h.get("/specialties");S.value=l.data}catch{c.error("Error al cargar especialidades")}},R=async()=>{try{const l={};a.value.specialty&&(l.specialty=a.value.specialty);const t=await h.get("/doctors",{params:l});k.value=t.data}catch{c.error("Error al cargar m√©dicos")}},V=async()=>{if(!(!a.value.date||!a.value.specialty)){g.value=!0;try{const l={date:a.value.date,specialty:a.value.specialty};a.value.doctorId&&(l.doctorId=a.value.doctorId);const t=await h.get("/availability",{params:l});_.value=t.data}catch{c.error("Error al cargar disponibilidad")}finally{g.value=!1}}},F=async()=>{if(!a.value.serviceType||!a.value.specialty){c.warning("Por favor complete todos los campos requeridos");return}i.value=2},L=()=>{if(!a.value.date||!a.value.time){c.warning("Por favor seleccione fecha y hora");return}i.value=3},M=()=>{i.value>1&&i.value--},q=async()=>{if(!a.value.phoneNumber||!a.value.emergencyContact){c.warning("Por favor complete la informaci√≥n de contacto");return}g.value=!0;try{const[l,t]=a.value.time.split(":"),p=new Date(a.value.date);p.setHours(parseInt(l),parseInt(t),0,0);const y={patientId:a.value.patientId,doctorId:a.value.doctorId,dateTime:p.toISOString(),serviceType:a.value.serviceType,specialty:a.value.specialty,notes:a.value.notes,phoneNumber:a.value.phoneNumber,emergencyContact:a.value.emergencyContact,status:"SCHEDULED"};await h.post("/appointments",y),c.success("¬°Cita reservada exitosamente!"),setTimeout(()=>{j.push("/")},2e3)}catch{c.error("Error al reservar la cita")}finally{g.value=!1}},w=m(new Date),d=m(new Date),H=N(()=>{const l=d.value.getFullYear(),t=d.value.getMonth(),p=new Date(l,t,1).getDay(),y=new Date(l,t+1,0).getDate(),b=[];for(let s=0;s<p;s++)b.push(null);for(let s=1;s<=y;s++)b.push(s);return b}),Y=l=>{if(!l)return;const t=d.value.getFullYear(),p=d.value.getMonth();w.value=new Date(t,p,l),a.value.date=w.value.toISOString().split("T")[0],V()},B=()=>{d.value=new Date(d.value.getFullYear(),d.value.getMonth()-1)},P=()=>{d.value=new Date(d.value.getFullYear(),d.value.getMonth()+1)},U=N(()=>d.value.toLocaleDateString("es-ES",{month:"long",year:"numeric"}));return O(),(l,t)=>{var y,b;const p=G("router-link");return r(),o("div",Z,[e("div",ee,[t[41]||(t[41]=e("div",{class:"mb-8"},[e("h1",{class:"text-4xl font-bold text-gray-800 mb-2"},"Reservar una Nueva Cita"),e("p",{class:"text-gray-600"},"Complete los siguientes pasos para agendar su pr√≥xima visita.")],-1)),e("div",te,[e("div",se,[e("div",ae,[e("div",{class:u(["w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg transition-all",i.value>=1?"bg-primary text-white":"bg-gray-200 text-gray-400"])}," 1 ",2),e("span",{class:u(["text-xs mt-2 font-medium",i.value>=1?"text-primary":"text-gray-400"])},"DETALLES",2)]),e("div",{class:u(["flex-1 h-1 mx-4",i.value>=2?"bg-primary":"bg-gray-200"])},null,2),e("div",le,[e("div",{class:u(["w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg transition-all",i.value>=2?"bg-primary text-white":"bg-gray-200 text-gray-400"])}," 2 ",2),e("span",{class:u(["text-xs mt-2 font-medium",i.value>=2?"text-primary":"text-gray-400"])},"FECHA Y HORA",2)]),e("div",{class:u(["flex-1 h-1 mx-4",i.value>=3?"bg-primary":"bg-gray-200"])},null,2),e("div",oe,[e("div",{class:u(["w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg transition-all",i.value>=3?"bg-primary text-white":"bg-gray-200 text-gray-400"])}," 3 ",2),e("span",{class:u(["text-xs mt-2 font-medium",i.value>=3?"text-primary":"text-gray-400"])},"CONFIRMACI√ìN",2)])])]),v(e("div",re,[t[12]||(t[12]=e("h2",{class:"text-2xl font-bold mb-6"},"Tipo de Servicio",-1)),e("div",ie,[(r(),o(x,null,f(E,s=>e("div",{key:s.id,onClick:D=>a.value.serviceType=s.id,class:u(["p-6 border-2 rounded-xl cursor-pointer transition-all hover:shadow-md",a.value.serviceType===s.id?"border-primary bg-green-50":"border-gray-200 bg-white"])},[e("div",de,n(s.icon),1),e("h3",ue,n(s.label),1),e("p",ce,n(s.description),1)],10,ne)),64))]),t[13]||(t[13]=e("h3",{class:"text-xl font-bold mb-4"},"Detalles de la Consulta",-1)),e("div",pe,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Especialidad",-1)),v(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.specialty=s),onChange:R,class:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary",required:""},[t[5]||(t[5]=e("option",{value:""},"Seleccione especialidad",-1)),(r(!0),o(x,null,f(S.value,s=>(r(),o("option",{key:s,value:s},n(s),9,me))),128))],544),[[A,a.value.specialty]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"M√©dico (Opcional)",-1)),v(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.doctorId=s),class:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary"},[t[7]||(t[7]=e("option",{value:null},"Cualquier m√©dico disponible",-1)),(r(!0),o(x,null,f(k.value,s=>(r(),o("option",{key:s.id,value:s.id},n(s.name),9,ve))),128))],512),[[A,a.value.doctorId]])])]),e("div",ge,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Motivo de la Consulta",-1)),v(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.notes=s),placeholder:"Describa brevemente el motivo de su visita...",class:"w-full border border-gray-300 rounded-lg p-3 h-32 focus:ring-2 focus:ring-primary focus:border-primary resize-none"},null,512),[[I,a.value.notes]])]),e("div",ye,[K(p,{to:"/",class:"btn-secondary px-6 py-3"},{default:Q(()=>[...t[10]||(t[10]=[C("Cancelar",-1)])]),_:1}),e("button",{onClick:F,class:"btn-primary px-8 py-3 flex items-center gap-2"},[...t[11]||(t[11]=[C(" Buscar Disponibilidad ",-1),e("span",null,"‚Üí",-1)])])])],512),[[T,i.value===1]]),v(e("div",be,[t[19]||(t[19]=e("h2",{class:"text-2xl font-bold mb-6"},"Seleccione Fecha y Hora",-1)),t[20]||(t[20]=e("p",{class:"text-gray-600 mb-6"},"Elija una fecha disponible en el calendario y luego seleccione un horario.",-1)),e("div",xe,[e("div",null,[e("div",fe,[e("div",Ce,[e("button",{onClick:B,class:"p-2 hover:bg-gray-100 rounded"},[...t[14]||(t[14]=[e("span",{class:"text-xl"},"‚Äπ",-1)])]),e("h3",we,n(U.value),1),e("button",{onClick:P,class:"p-2 hover:bg-gray-100 rounded"},[...t[15]||(t[15]=[e("span",{class:"text-xl"},"‚Ä∫",-1)])])]),e("div",he,[(r(),o(x,null,f(["Lun","Mar","Mi√©","Jue","Vie","S√°b","Dom"],s=>e("div",{key:s,class:"text-xs font-medium text-gray-500 py-2"},n(s),1)),64)),(r(!0),o(x,null,f(H.value,(s,D)=>(r(),o("div",{key:D,onClick:Ke=>Y(s),class:u(["aspect-square flex items-center justify-center rounded-lg cursor-pointer transition-all",s===null?"invisible":"",w.value.getDate()===s&&w.value.getMonth()===d.value.getMonth()?"bg-primary text-white font-bold":"hover:bg-gray-100"])},n(s),11,ke))),128))])])]),e("div",null,[t[16]||(t[16]=e("h3",{class:"font-bold mb-4"},"Horarios Disponibles",-1)),_.value.length===0?(r(),o("div",_e," Seleccione una fecha para ver horarios disponibles ")):(r(),o("div",De,[(r(!0),o(x,null,f(_.value,s=>(r(),o("button",{key:s.time,onClick:D=>a.value.time=s.time,disabled:!s.available,class:u(["p-3 rounded-lg font-medium transition-all",s.available?a.value.time===s.time?"bg-primary text-white":"bg-white border-2 border-gray-200 hover:border-primary":"bg-gray-100 text-gray-400 cursor-not-allowed"])},n(s.time),11,Te))),128))]))])]),e("div",{class:"flex justify-between mt-8"},[e("button",{onClick:M,class:"btn-secondary px-6 py-3 flex items-center gap-2"},[...t[17]||(t[17]=[e("span",null,"‚Üê",-1),C(" Atr√°s ",-1)])]),e("button",{onClick:L,class:"btn-primary px-8 py-3 flex items-center gap-2"},[...t[18]||(t[18]=[C(" Continuar ",-1),e("span",null,"‚Üí",-1)])])])],512),[[T,i.value===2]]),v(e("div",Ie,[t[37]||(t[37]=e("h2",{class:"text-2xl font-bold mb-6"},"Confirmar Cita",-1)),t[38]||(t[38]=e("p",{class:"text-gray-600 mb-8"},"Por favor, revise los detalles de su cita y complete la informaci√≥n de contacto.",-1)),e("div",Se,[t[31]||(t[31]=e("h3",{class:"font-bold mb-4 text-lg"},"Resumen de la Cita",-1)),e("div",Ee,[e("div",Me,[t[22]||(t[22]=e("div",{class:"text-primary text-2xl"},"üìÖ",-1)),e("div",null,[t[21]||(t[21]=e("p",{class:"text-sm text-gray-500"},"Fecha y Hora",-1)),e("p",Ne,n(a.value.date)+" a las "+n(a.value.time),1)])]),e("div",Ae,[t[24]||(t[24]=e("div",{class:"text-primary text-2xl"},"üè•",-1)),e("div",null,[t[23]||(t[23]=e("p",{class:"text-sm text-gray-500"},"Tipo de Servicio",-1)),e("p",je,n((y=E.find(s=>s.id===a.value.serviceType))==null?void 0:y.label),1)])]),e("div",Oe,[t[26]||(t[26]=e("div",{class:"text-primary text-2xl"},"üî¨",-1)),e("div",null,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-500"},"Especialidad",-1)),e("p",Re,n(a.value.specialty),1)])]),e("div",Ve,[t[28]||(t[28]=e("div",{class:"text-primary text-2xl"},"üë®‚Äç‚öïÔ∏è",-1)),e("div",null,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-500"},"M√©dico",-1)),e("p",Fe,n(((b=k.value.find(s=>s.id===a.value.doctorId))==null?void 0:b.name)||"Cualquier m√©dico disponible"),1)])])]),a.value.notes?(r(),o("div",Le,[t[30]||(t[30]=e("div",{class:"text-primary text-2xl"},"üìù",-1)),e("div",null,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-500"},"Motivo de la Consulta",-1)),e("p",qe,n(a.value.notes),1)])])):W("",!0)]),t[39]||(t[39]=e("h3",{class:"font-bold mb-4 text-lg"},"Informaci√≥n de Contacto",-1)),t[40]||(t[40]=e("p",{class:"text-sm text-gray-600 mb-4"},"Ingrese un n√∫mero para recordatorios y un contacto de emergencia.",-1)),e("div",He,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"N√∫mero de Tel√©fono",-1)),e("div",Ye,[t[32]||(t[32]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},"üìû",-1)),v(e("input",{type:"tel","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.phoneNumber=s),placeholder:"+1 (555) 123-4567",class:"w-full border border-gray-300 rounded-lg p-3 pl-10 focus:ring-2 focus:ring-primary focus:border-primary",required:""},null,512),[[I,a.value.phoneNumber]])])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nombre de Contacto de Emergencia",-1)),e("div",Be,[t[34]||(t[34]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},"üë§",-1)),v(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.emergencyContact=s),placeholder:"Ej: Juana P√©rez",class:"w-full border border-gray-300 rounded-lg p-3 pl-10 focus:ring-2 focus:ring-primary focus:border-primary",required:""},null,512),[[I,a.value.emergencyContact]])])])]),e("div",Pe,[e("button",{onClick:M,class:"btn-secondary px-6 py-3 flex items-center gap-2"},[...t[36]||(t[36]=[e("span",null,"‚Üê",-1),C(" Atr√°s ",-1)])]),e("button",{onClick:q,disabled:g.value,class:"btn-primary px-8 py-3 flex items-center gap-2 disabled:opacity-50"},[g.value?(r(),o("span",ze,"Guardando...")):(r(),o("span",$e,"Confirmar Cita ‚úì"))],8,Ue)])],512),[[T,i.value===3]])])])}}}),Ze=X(Je,[["__scopeId","data-v-185cade7"]]);export{Ze as default};
